import { WeChatLink, DocImage } from "/src/components/index.js"

# 客户端性能测试标准

## 客户端画质档位标准

1. 游戏画质分档档位标准 | P0 | 30D |

    * 游戏支持的最低设备需要支持对应发行地区市场占比的 90% 以上的用户设备
    * 高中低分档占比尽可能倾向中、高档画质，低画质用户 占比不可超过 40%，推荐占比 25% 以下，尽量让更多用户体验中高画质
    * 视竞品支持的最低设备情况适当调整下限情况，尽可能达到竞品的下限设备

    [地区设备占比分析](https://qa.bilibii.co)

    [客户端性能测试流程](https://qa.bilibii.co)

## 客户端性能参数标准

1. 游戏 战斗外 FPS标准  | P0 | 15D |

    * 高（60帧）	平均帧数： 58	稳定帧数：>= 55	    切换帧数：50
    * 高（30帧）	平均帧数： 29	稳定帧数：>= 27	    切换帧数：22
    * 中（30帧）	平均帧数： 27	稳定帧数：>= 25	    切换帧数：20
    * 低（30帧）	平均帧数： 25	稳定帧数：>= 23	    切换帧数：18

稳定帧数：单一界面不操作的情况下的帧数最低值

切换帧数：界面切换时，最低帧数不可低于最低值

2. 游戏 战斗内 FPS标准  | P0 | 15D |

    * 高（60帧）	平均帧数： 55	稳定帧数：>= 50
    * 高（30帧）	平均帧数： 28	稳定帧数：>= 26
    * 中（30帧）	平均帧数： 25	稳定帧数：>= 23
    * 低（30帧）	平均帧数： 23	稳定帧数：>= 20

稳定帧数：游戏内不进行操作时的帧数最低值
    
3. 游戏CPU标准  | P0 | 15D |

    * 高端设备最高画质下运行   CPU峰值占比低于 20%
    * 低端设备推荐画质下运行   CPU峰值占比低于 20%

4. 游戏Memory标准   | P0 | 15D |

    * 3D战斗项目参考标准如下（G10、G23）
    * 三档设备推荐画质情况下    平均内存 <= 1300MB    内存峰值 <= 1500MB
    * 高端设备最高画质情况下    平均内存 <= 1500MB    内存峰值 <= 1800MB
    * 新手流程  内存峰值 <=1800MB
    不同项目根据游戏类型不同，所需要支持的内存范围也不一致，此处数据来源于竞品数据参考得出


5. 游戏设备发热情况到达预期 | P0 | 15D |

    * （战斗内）正常体验20min手机温度持续不超过 39℃（非充电状态）
    * （战斗外）正常体验20min手机温度持续不超过 35℃（非充电状态）
    根据线上其他头部产品，以红外测温仪测得温度数值，如需相关支持，请联系<WeChatLink name='李白'>李白</WeChatLink>


6. 游戏Jank标准 | P1 | 15D |

    * 待补充

7. 游戏网络情况 | P1 | 15D |

    * 待补充

## 客户端画质标准

1. 游戏内支持多个画质分档   | P0 | 15D |

    * 默认高中低三档
    * 游戏在不同档位画质下均功能正常

2. 默认推荐画质预期档位一致 | P0 | 15D |

    * 按照CPU或GPU进行档位划分
    * 分档时需要支持CPU多品牌（骁龙、麒麟、三星、联发科）、GPU多品牌（麒麟、Mali）
    * 档位划分与实际的预期分档设备一致
    * iOS档位需要区别iPhone\iPad

3. 画质设置与游戏内实际效果 | P0 | 15D |

    * 确认每个档位画质差异
    * 游戏画质设置与实际效果对齐
    * 游戏改变画质设置后，正确改变画质情况

## 客户端性能其他标准

1. 战斗外 Memory增长释放无异常 | P0 | 15D |

    * 确认界面内存释放方式，如关闭界面后直接释放
    * 连续开关单一界面，界面打开、关闭Memory增长不应大于 10MB，
    * 稳定游戏30min以上游戏，整体Memory与进入游戏稳定时的内存数值比较不超过 50MB 变化

    * 确认界面内存释放方式，如切换大场景情况下释放
    * 将全部界面逐一打开界面，总内存未超过内存峰值
    * 将全部界面再次打开界面，总内存未超过第一次打开时峰值
    * 游戏切换到战斗内时，内存正常释放
    * 游戏切换到战斗内时，内存正常
    * 稳定游戏30min以上游戏，整体Memory与初始比较无超过 50MB 变化

2. 战斗内 Memory增长释放无异常 | P0 | 15D |

    * 进入战斗后内存增长不会超过内存峰值
    * 退出战斗后内存与进入战斗前内存变化小于10MB
    * 长时间在战斗内操作，内存无明显变化

3. 功能切换与展示标准   | P1 | 15D |

    * 战斗外    打开界面时，界面中背景、图片、icon无预加载、闪白块情况
    * 战斗外    非场景切换：手动记录单界面加载时长，打开时长不应大于 1.5s ，且平均在1s以下
    * 战斗外    场景切换：手动记录单界面加载时长，切换场景时长超过 2s 的情况下应有loading表现
    * 战斗内    进入战斗时，战斗加载时间不可超过    10s
    * 战斗内    战斗结束时，返回主界面加载时间不可超过  10s


4. 应用加载时间 | P1 | 15D |

    * 打开App进入主界面时间 高端设备 < 30s
    * 打开App进入主界面时间 中端设备 < 45s
    * 打开App进入主界面时间 低端设备 < 60s
    * 游戏完成热更后，再次打开loading时间 < 10s


## 客户端稳定性测试标准

1. 游戏在接入部分SDK后性能正常，无异常卡顿、发烫情况，整体数据影响较小 | P0 | 15D |
    
    * 接入安全等SDK后单独重新测试性能情况，确保SDK对于性能影响较小
    * 游戏在是否有热更新的情况下需要，单独重新重新测试游戏性能情况，明确热更资源文件对于性能影响较小

2. 游戏在正常游戏体验1小时情况下，长时间体验游戏整体性能情况正常 | P0 | 15D |

    * 游戏帧率无明显浮动
    * 游戏发热正常
    * 游戏内存低于峰值内存
    * 游戏内存无明显增长