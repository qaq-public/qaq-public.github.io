---
sidebar_position: 1
---
## 安全测试介绍

安全测试主要是对游戏中的安全风险项进行排查，例如测试游戏包体的加固，若未加固将导致游戏源码和资源的泄露；反外挂SDK的接入，若接入失败或ACE后台功能未开启，这意味着修改器可以随意的修改游戏的内存和数据、以及通过hook等方式导入玩家个人的模块，这无疑会对游戏以及项目产生巨大的影响；又或权限问题，若项目中申请了不被应用商店允许的权限，这会导致无法按时上线应用商店。安全测试的目的就是提前发现以及解决这些问题，避免了无法上线或上线后出现安全隐患的问题。

### ACE加固测试

[ACE加固方案-官网(海外)](https://www.anticheatexpert.com/#/doc-center/4b6054549dafedd885e6b8ce10b7f1a4455a3f4c)

[ACE加固方案-官网(海外)](https://intl.anticheatexpert.com/#/doc-center/4b6054549dafedd885e6b8ce10b7f1a4455a3f4c)

游戏上线前需进行ACE加固测试

- 测试目的：校验ACE加固是否正确接入以及生效

### ACE反外挂测试

[ACE反外挂闪退策测试-官网 (国内)](https://www.anticheatexpert.com/#/doc-center/ea6e3a38d103f62662ffa5eed6eb57a5314b2607)

[ACE反外挂闪退策测试-官网 (海外)](https://intl.anticheatexpert.com/#/doc-center/ea6e3a38d103f62662ffa5eed6eb57a5314b2607)

游戏上线前需进行ACE反外挂测试

- 测试目的：校验ACE防外挂是否正确接入以及生效，检查项目组各防外挂策略是否开启

### 爱加密平台测试

[漏扫平台及合规检测平台使用介绍 - 安全 ](https://info.bilibili.co/pages/viewpage.action?pageId=426196430&preview=/426196430/426196432/爱加密漏扫平台及合规检测平台使用手册.docx)

[APP应用安全编码规范v1.3 - 安全](https://info.bilibili.co/pages/viewpage.action?pageId=510911602)

- 测试目的：通过解包以及爱加密平台扫描apk、ipa等包体，确认是否存在安全红线相关问题以及是否存在不合规问题

## 安全测试模块

安全测试未通过说明存在安全问题，主要可分为ACE加固、ACE反外挂、安全平台三方面问题，ACE加固未通过说明包体本身可能存在代码未混淆、资源未加密等问题；ACE反外挂未通过说明游戏可能存在SDK接入失败、反外挂后台功能未开启、反外挂策略失效等问题；安全平台未通过说明游戏可能存在权限问题、安全红线风险等问题。当存在以上问题时，会导致无法按时上线或上线后造成资源泄露、外挂修改内存等问题。

### ACE加固

1. 代码混淆

- 加固会对指定so文件、dll文件进行加密，需验证是否对重要文件（libil2cpp.so）进行加密

2. Global-metadata.dat 加密

- 基础加固功能：加固会对Global-metadata.dat 文件进行加密，反编译后无法获取该文件具体内容
- 运行时解密：带有-s参数时，会在现有global-metadata.dat 加密基础上，对部分关键数据进行二次加密

3. Unity AB资源加密

- 带有-s参数时，会开启Unity AB资源文件加密，反编译后无法提取包体中AB资源，从而避免资源泄露

### ACE防外挂

|      | 主要功能                   | 功能详情                                                  |
| ---- | -------------------------- | --------------------------------------------------------- |
| 1    | 二选一检测                 | 默认开启，设备安装已知外挂样本时，弹窗确认后闪退          |
| 2    | 修改器、变速器闪退         | 默认开启，存在已知外挂修改游戏内存或游戏，实时闪退        |
| 3    | 虚拟机闪退                 | 默认开启，游戏运行在虚拟机内，实时闪退                    |
| 4    | root弹窗闪退               | 上线后建议开启&关注，游戏运行在root环境时，实时闪退       |
| 5    | Frida本地扫描、反Frida调试 | 默认开启，设备存在Frida或游戏被Frida注入时，实时退出游戏  |
| 6    | 破解证书闪退               | 上线后建议开启&关注，游戏为盗版或非正版时，游戏会实时闪退 |
| 7    | 反资源动态提取             | 默认开启，游戏处于被调试状态时，会弹窗提示当前被调试      |
| 8    | 主动防御-反调试占位        | 默认开启，不允许其他任何进程调试游戏进程                  |

### 爱加密平台

1. 安全红线

|  | Android检查项                      | iOS检查项|
| ---- | ----------------------------- | --------------- |
| 1    | AllowBackup备份权限配置安全性 | Webview组件安全 |
| 2    | Debuggable调试权限配置安全性  | 证书发布检测    |
| 3    | Janus安卓签名漏洞             | 动态调试检测    |
| 4    | SDK安全检查                   | SDK安全检查     |
| 5    | 代码混淆                      |                 |
| 6    | Activity组件安全              |                 |
| 7    | Broadcast组件安全             |                 |
| 8    | Content组件安全               |                 |
| 9    | Service组件安全               |                 |
| 10   | Webview组件安全               |                 |

2. 权限安全

- 校验是否存在不安全权限，例：申请QUERY_ALL_PACKAGES 权限后，无法通过Google商店审核

3. 通信安全

- 确保协议内容已加密
- 使用安全的https通信

## 测试结果反馈

安全测试未通过时，需对未通过问题进行分析并反馈项目组，详细记录发生当前问题的原因，并存入 [安全历史问题 ](https://doc.weixin.qq.com/sheet/e3_AeIA0gYLACcH11t1izjQa2Ve0W4FV?scode=ANYAEAdoABEpQV850CAeIA0gYLACc)中，验收时向项目组了解问题的解决方案，方便下次其他项目组存在同样问题时能快速定位以及给出解决方案。