---
sidebar_position: 1
---
import { DocImage } from "/src/components/index.js"

# 弱网测试

## 弱网测试简介

功能测试主要是保证功能的完整性，能让玩家能够流程的体验整个游戏功能，而弱网测试就是其中需要关注的异常点。

首先我们知道现在的网络场景一般是无网络2g、3g、4g、5G和wifi。

那为什么要进行弱网测试呢？

首先一个是用户的网络场景。我们不能保证我们的用户即玩家有良好的网络在玩游戏，网络也会波动，波动就是网络不畅，一样需要保证玩家的体验。

另一个是保证游戏数据的一致性和准确性。玩游戏玩的就是游戏数据，不能因为网络状况比较差，导致游戏内的数据丢失。

进行弱网测试的原因或者说目的有两个：一个是为了保证用户能够有完好的游戏体验，另一个更重要的还是保证游戏数据的一致性和准确性。


## 弱网测试的要点
无网测试、弱网功能测试、弱网体验测试、弱网响应时间 、网络切换测试以及异常机制、热更&断连等其他模块与热更的耦合

### 无网测试

无网测试就是在没有网络状态下进行测试。

其实这个比较简单，直接在游戏过程中把网断掉，就变成了无网状态。

到了无网状态之后，我们要关注或者说测试要点是：

①及时提醒网络异常。游戏玩着玩着，突然断开了网络，显而易见的表现为文字弹出框：当前网络环境异常，正在重连中。

②不可进行游戏内操作。已经有弹出框了，必然不会给玩家带来不必要的操作，或者说不能让玩家直接操作游戏内功能，就是说任何的点击都是无效的。

③各个功能是否受到影响。

④恢复网络，可手动重连。为了让玩家有良好的游戏体验，那么必然一旦恢复网络，就可以再次体验游戏，一个是自动重新连接游戏，另一个是可以手动连接游戏。



### 弱网功能测试

上面说的是无网，现在是真正的弱网状态。

①弱网情况下游戏热更下载

②游戏页面响应时间

③游戏页面显示是否重叠

在弱网环境下，游戏响应不及时时，不断地来回点击各个游戏功能。是不能在恢复网络或者页面加载后出现多个页面重叠的现象。

④超时文案

弱网状态下，一旦请求数据超时，或者说转菊花转了半天还是没有请求到数据，这就需要给用户提示框：请求超时。

⑤是否有请求堆积

在弱网状态下，进行功能点击是会表现出转菊花的状态了。此时对于玩家而言，就会重复点击此功能，或者瞎点。

每一次点击都会有一次对服务器的请求，然后网络恢复后服务器收到这些请求就会给出响应。

⑥是否会有断线重连

现在的手游都会做断线重连的机制。可以考虑一下三个方面：客户端是否会重发请求，发几次？客户端重连失败几次会不允许重连？服务器如何允许重连？



### 弱网体验测试

①是否会有loading、转菊花。

②是否有文案提示 



### 网络切换测试

不停地进行wifi、4g、3g、2g和无网络之间来回切换，模拟用户的网络环境



### 异常机制

①异常信息文案的处理

②容错机制的处理，比如等待超时anr

③游戏对局中重连机制

④超时机制



## 弱网测试的测试分析图

<DocImage src='nettest/rw5.png'></DocImage>


## 弱网测试环境标准

参考以下参数为各种网络环境模拟情况

<DocImage src='nettest/rw6.png'></DocImage>

## 弱网测试工具

具体请查看弱网测试工具教程（建议优先考虑使用树莓派测试弱网）
