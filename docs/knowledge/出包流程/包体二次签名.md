# 包体签名流程文档
import { WeChatLink, DocImage } from "/src/components/index.js"

## 签名目的

目前所有对外Android包体均需要通过签名平台二次签名，将项目证书替换为公司级证书，包括简体、海外包体均需要。

## 简体签名环境

### 签名系统网址host

* （绑定host后才可以进行网页的登录）

host地址： 10.24.21.130
[game-open-platform-sdk-package.bilibili.co](http://game-open-platform-sdk-package.bilibili.co)

如无相关权限 联系 <WeChatLink name='莫得'>莫得</WeChatLink> 申请

### 登录签名后台

签名后台地址：<http://game-open-platform-sdk-package.bilibili.co/package_part1.jsp>


## 简体签名流程

### 左侧页签选择新的任务

<DocImage src='rename/be59287e4dc547f7fed8d3ff5b105065.png'></DocImage>

### 依次填写需要签名包体信息

（第一次打包需新加游戏，联系签名平台负责人  <WeChatLink name='我我我的天啊'>我我我的天啊（xiaqing）</WeChatLink>）

以下填写内容以黑潮为例

* 游戏：

简体CN包体：黑潮：深海觉醒

繁体TW包体： 黑潮：深海覺醒 繁體版

繁体MY包体：深海戰線

（注：不可选错）

* 版本：（黑潮为例）

版本命名规则：（项目组自定义：仅作为二次签名后的apk输出使用）

*不可过长*

    建议：地区_版本_包体_版本号_日期

    例如：tw_ob_qa_172_0923

    对应如下：台湾_OB版本_qa包_1.7.2版本号_9月23日

    （注：不可使用已经使用过的版本会导致无法打包）

* 描述：

输入：开放平台

* 游戏类型：

全部版本均选择为免费（此处的免费意思是:在应用商店中是否需要付费下载）

* SDK类型：

根据具体的项目的SDK情况选择对应的SDK

（注：不可选错）

* 填写完成后点击页面右下角NEXT

### 上传文件

* 点击浏览：选择正确的包体

（注意：包体名称不能存在汉字、特殊符号）

<DocImage src='rename/24d5e68ccaf2484b008714e86dbf56cb.png'></DocImage>

* 点击上传（等待页面上方出现上传成功提示如图）

<DocImage src='rename/08842b560970ff5a00ea8518d11ab74e.png'></DocImage>
 
* 点击开始检查：

<DocImage src='rename/da0a8b57b5a4a3d37c742cff46995d97.png'></DocImage>

检查结束后查看页面下方的自检报告

如有问题可以联系平台SDK同学：<WeChatLink name='莫得'>莫得</WeChatLink>

确认以上自检是否有问题，有问题修复问题后再签名

没有问题后点击右下角NEXT开始进入签名流程

### 开始签名

* 点击开始打包

<DocImage src='rename/6afcb37e7f47098956af8fe64cecf994.png'></DocImage>


* 打包完成，等待阶段可点击刷新查看，打包状态（时间较长，耐心等待）

* 成功，此时打包状态变更，地址点击即可下载打好包体

<DocImage src='rename/ce46bf6cf46567a568fe824f44b77078.png'></DocImage>

## 海外签名环境

### 签名系统网址host

* （绑定host后才可以进行网页的登录）
* 172.22.33.245 developer.biligame.net

## 海外签名流程

### 开始签名
选择对应的SDK

    bili_kor:韩国SDK

    bili_jp：日本SDK

    komoe:国际服、小萌SDK

    bluetaku：韩国SDK

选择对应的包体

    支持apk\aab

点击开始签名

签名成功后下载

<DocImage src='rename/inteweb.png'></DocImage>

## 常见问题

Q1：包体中有很多报错信息如何解决？

A1：按照对应给出的提示给到研发进行解决，无法明确的问题直接与<WeChatLink name='莫得'>莫得</WeChatLink>沟通。

Q2：签名的包体打开一会就闪退？

A2：可能和MTP加固有关系，请查看MTP配置文件中修改对应的白名单文件后重试

Q3：渠道包、广告包签名流程是如何的？

A3：渠道包、广告包不进行平台的二次签名，由运营进行处理。

Q4：未签名包体有哪些常见问题？

A4：授权登录失败、apple授权登录失败、支付失败

Q5：二次签名的主要修改内容有哪些？

A5：解包后：assets文件夹下：distributor.txt文件内容变更为1（原先值为100，作用为数据平台部门SDK收集数据时区分QA环境与生产环境）

MATA-INFO文件下：重新修改为对应的SDK文件（详见下图）

<DocImage src='rename/a06fb1d844c12a2bbfe4a5fb1a234d85.png'></DocImage>
